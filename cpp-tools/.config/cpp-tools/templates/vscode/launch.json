{
  "version": "0.2.0",
  "configurations": [
    {
      //===------------- Competitive Programming Task (macOS) -------------===//
      // Uses CodeLLDB and redirects input from the corresponding '.in' file.
      "name": "[[Competitions]] Debug - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Build Active File (Debug)",
      "stdio": [
        "${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in",
        null,
        null
      ]
    },
    {
      //===----------------- Standard Debug Task (macOS) ------------------===//
      // This version also loads your custom LLDB formatters.
      "name": "(macOS) Debug - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Build Active File (Debug)",
      "sourceLanguages": ["cpp"],
      "initCommands": [
        "command script import /Users/lcs-dev/.lldb/LLDB_Formatters"
      ]
    },
    {
      //===---------- Debug with user-provided arguments (macOS) ----------===//
      "name": "(macOS) Debug with Arguments - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": ["${input:debugArgs}"],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Build Active File (Debug)"
    },
    {
      //===------------ Debug with MS C/C++ Extension (macOS) -------------===//
      "name": "(macOS) Debug - MS C/C++",
      "type": "cppdbg",
      "targetArchitecture": "aarch64",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [
        "<",
        "${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in"
      ],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "MIMode": "lldb",
      "preLaunchTask": "Build: Build Active File (Debug)",
      "setupCommands": [
        {
          "description": "Load Custom LLDB Formatters",
          "text": "command script import /Users/lcs-dev/.lldb/lldb_formatters.py",
          "ignoreFailures": false
        }
      ]
    },
    {
      //===----------------- Standard Debug Task (Linux) ------------------===//
      "name": "(Linux) Debug - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Build Active File (Debug)",
      "sourceLanguages": ["cpp"],
      "initCommands": [
        "command script import /home/lcs-dev/.lldb/LLDB_Formatters"
      ]
    },
    {
      //===------------ Debug with MS C/C++ Extension (Linuz) -------------===//
      "name": "(Linux) Debug - MS C/C++",
      "type": "cppdbg",
      "targetArchitecture": "x64",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [
        "<",
        "${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in"
      ],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "MIMode": "lldb",
      "preLaunchTask": "Build: Build Active File (Debug)",
      "setupCommands": [
        {
          "description": "Load Custom LLDB Formatters",
          "text": "command script import /home/lcs-dev/.lldb/lldb_formatters.py",
          "ignoreFailures": false
        }
      ]
    },
    {
      //===---- Cross-Platform Debug Configuration with Input Support -----===//
      "name": "Debug C/C++ (Cross-Platform with Input)",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "preLaunchTask": "Build: Build Active File (Debug)",

      //===--------------- Platform-specific Configuration ----------------===//
      "windows": {
        "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}.exe",
        "MIMode": "gdb",
        "miDebuggerPath": "C:/msys64/mingw64/bin/gdb.exe",
        "args": [
          "<",
          "${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in"
        ]
      },
      "linux": {
        "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
        "MIMode": "gdb",
        "miDebuggerPath": "/usr/bin/gdb",
        "args": [
          "<",
          "${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in"
        ]
      },
      "osx": {
        "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
        "MIMode": "lldb",
        "args": [
          "<",
          "${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in"
        ]
      },

      //===------------------------ Setup Commands ------------------------===//
      "setupCommands": [
        {
          "description": "Load Custom LLDB Formatters (macOS)",
          "text": "command script import /Users/lcs-dev/.lldb/LLDB_Formatters",
          "ignoreFailures": true
        },
        {
          "description": "Enable Pretty-Printing for GDB (Linux/Windows)",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        },
        {
          "description": "Set inline breakpoint strategy (LLDB)",
          "text": "settings set target.inline-breakpoint-strategy always",
          "ignoreFailures": true
        }
      ]
    }
  ],
  "inputs": [
    {
      "id": "debugArgs",
      "type": "promptString",
      "description": "Enter program arguments for debugging",
      "default": ""
    }
  ]
}
