# =====------------------------------------------------------------------===== #
# +++++++++++++++++++++++++++ KITTY CONFIGURATION ++++++++++++++++++++++++++++ #
# =====------------------------------------------------------------------===== #
#
# Modern terminal emulator configuration optimized for performance and UX.
# Based on official documentation: https://sw.kovidgoyal.net/kitty/conf/
#
# =====------------------------------------------------------------------===== #

# ================================ Typography ================================ #

# Configure font settings for optimal readability.
font_family      CaskaydiaCove Nerd Font Mono
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        14.5

# =============================== Performance ================================ #

# Optimize performance settings for smooth operation.
repaint_delay 8
input_delay 1
sync_to_monitor yes

# ============================== Window Behavior ============================= #

# Customize the appearance and behavior of the terminal window.
hide_window_decorations titlebar-only
window_padding_width 12 6 8 6
remember_window_size yes
initial_window_width 140c
initial_window_height 40c

# Transparency and background.
background_opacity 0.95
background_blur 80
dynamic_background_opacity yes

# Window layout.
enabled_layouts tall:bias=50;full_size=1;mirrored=false, fat:bias=50;full_size=1;mirrored=false, grid, horizontal, vertical, stack
window_border_width 1pt
draw_minimal_borders yes
window_margin_width 0
single_window_margin_width -1
active_border_color #3d59a1
inactive_border_color #2c3352

# ============================ Cursor Settings ============================== #

# Customize the appearance and behavior of the terminal cursor.
cursor_trail 1
cursor_trail_decay 0.1 0.4

# ============================= Feature Toggles ============================== #

# Enable or disable specific features.
allow_hyperlinks yes
confirm_os_window_close -2
enable_audio_bell no
visual_bell_duration 0.0
window_alert_on_bell yes

# URL handling.
url_style curly
open_url_with default
detect_urls yes
show_hyperlink_targets yes

# Copy selection immediately (tmux-style).
copy_on_select yes

# Trim trailing spaces on copy/paste operations.
strip_trailing_spaces smart

# ============================== Remote Control ============================== #

# Enable remote control features.
allow_remote_control yes
listen_on unix:/tmp/kitty

# =========================== Terminal Capabilities ========================== #

# Configure terminal capabilities and behaviors.
enable_csi_u_key_encoding yes
enable_reflow_on_resize no
enable_image_scaling yes

# ============================== Resize Behavior ============================= #

# Customize the behavior of the terminal when resizing.
resize_draw_strategy blank
resize_debounce_time 0.1 0.5

# ================================= Tab Bar ================================== #

# Customize the appearance and behavior of the tab bar.
tab_bar_edge bottom
tab_bar_style custom
tab_bar_min_tabs 1
tab_bar_margin_width 0.0
tab_bar_margin_height 6.0 6.0

# Tab separator and alignment.
tab_separator ""
tab_bar_align left

# Tab styling.
active_tab_font_style bold
inactive_tab_font_style normal

# Powerline style for tabs.
tab_powerline_style slanted

# Disable built-in activity indicators.
tab_activity_symbol none
bell_on_tab no

# Session filtering - show only tabs from current session.
tab_bar_filter session:~ or session:^$

# Session styling.
tab_title_template "{title}"
active_tab_title_template "{title}"
tab_title_max_length 25

# Tab fade for inactive tabs.
tab_fade 0.4 0.6 0.8 1.0

# =========================== Terminal Identification ======================== #

# Set the terminal identification string.
term xterm-kitty

# ============================= Cursor Behavior ============================== #

# Customize the appearance and behavior of the terminal cursor.
shell_integration enabled
cursor_shape block
cursor_blink_interval 0.5
cursor_stop_blinking_after 15.0

# ============================ Scrollback Buffer ============================= #

# Configure the scrollback buffer settings.
scrollback_lines 10000
scrollback_pager less +G -R
scrollback_pager_history_size 10
scrollback_fill_enlarged_window yes

# ============================== Color Scheme ================================ #

# Themes live in ./themes. Change the include below to switch theme.
include ./themes/tokyo-night.conf

# =============================== Keybindings ================================ #

# Tabs and windows (platform-specific mod keys live in platform/*.conf).
# Common (non-CMD/Super) bindings stay here.

# Text navigation
map alt+left  send_text all \x1b[1;3D
map alt+right send_text all \x1b[1;3C

# Clipboard operations (platform mods in platform/*.conf).
map ctrl+shift+s paste_from_selection
map shift+insert paste_from_selection

# Scrolling.
map ctrl+shift+up        scroll_line_up
map ctrl+shift+down      scroll_line_down
map ctrl+shift+k         scroll_line_up
map ctrl+shift+j         scroll_line_down
map ctrl+shift+page_up   scroll_page_up
map ctrl+shift+page_down scroll_page_down
map ctrl+shift+home      scroll_home
map ctrl+shift+end       scroll_end
map ctrl+shift+h         show_scrollback

# Window management.
map ctrl+shift+enter new_window
map ctrl+shift+]     next_window
map ctrl+shift+[     previous_window
map ctrl+shift+f     move_window_forward
map ctrl+shift+b     move_window_backward
map ctrl+shift+`     move_window_to_top
map ctrl+shift+1     first_window
map ctrl+shift+2     second_window
map ctrl+shift+3     third_window
map ctrl+shift+4     fourth_window
map ctrl+shift+5     fifth_window
map ctrl+shift+6     sixth_window
map ctrl+shift+7     seventh_window
map ctrl+shift+8     eighth_window
map ctrl+shift+9     ninth_window
map ctrl+shift+0     tenth_window

# Tmux-style Tab navigation (Shift+A prefix).
map shift+a>1 goto_tab 1
map shift+a>2 goto_tab 2
map shift+a>3 goto_tab 3
map shift+a>4 goto_tab 4
map shift+a>5 goto_tab 5
map shift+a>6 goto_tab 6
map shift+a>7 goto_tab 7
map shift+a>8 goto_tab 8
map shift+a>9 goto_tab 9
map shift+a>0 goto_tab 10

# Rename current tab.
map shift+a>, set_tab_title

# Layout management.
map shift+a>l next_layout
map shift+a>enter toggle_layout stack

# Tab management.
map ctrl+shift+right next_tab
map ctrl+shift+left  previous_tab
map ctrl+shift+t     new_tab
map ctrl+shift+q     close_tab
map ctrl+shift+l     next_layout
map ctrl+shift+.     move_tab_forward
map ctrl+shift+,     move_tab_backward

# Font size.
map ctrl+shift+equal     increase_font_size
map ctrl+shift+plus      increase_font_size
map ctrl+shift+minus     decrease_font_size
map ctrl+shift+backspace restore_font_size

# Configuration reload.
map ctrl+shift+f5 load_config_file
map ctrl+shift+f6 debug_config

# ========================== Advanced Kitten Config ========================== #

# Customize hints appearance.
action_alias hints_open kitten hints --hints-offset=0 --alphabet=asdfghjklqwertyuiopzxcvbnm

# =========================== OS-specific Overrides ========================== #

# Load overrides based on the detected platform (KITTY_OS = linux | macos).
include ./platform/${KITTY_OS}.conf

# ============================================================================ #
