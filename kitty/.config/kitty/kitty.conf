# ============================================================================ #
# ++++++++++++++++++++++++++ KITTY CONFIGURATION +++++++++++++++++++++++++++++ #
# ============================================================================ #
#
# Modern terminal emulator configuration optimized for performance and UX.
# Based on official documentation: https://sw.kovidgoyal.net/kitty/conf/
#
# ============================================================================ #

# ================================ Typography ================================ #

font_family      CaskaydiaCove Nerd Font Mono
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        14.5

# =============================== Performance ================================ #

repaint_delay 8
input_delay 1
sync_to_monitor yes

# ============================== Window Behavior ============================= #

hide_window_decorations titlebar-only
window_padding_width 16
remember_window_size yes
initial_window_width 140c
initial_window_height 40c

# Transparency and background
background_opacity 0.95
background_blur 20
dynamic_background_opacity yes

# Window layout
enabled_layouts tall, fat, grid, horizontal, vertical, stack
window_border_width 1pt
draw_minimal_borders yes
window_margin_width 2
single_window_margin_width 0
active_border_color #3d59a1
inactive_border_color #101014

# ============================== Cursor Settings ============================= #

cursor_trail 1
cursor_trail_decay 0.1 0.4

# ================================ macOS Settings ============================ #

macos_quit_when_last_window_closed no
macos_colorspace default
macos_show_window_title_in window

# ============================= Feature Toggles ============================== #

allow_hyperlinks yes
confirm_os_window_close -2
enable_audio_bell no
visual_bell_duration 0.0
window_alert_on_bell yes

# URL handling
url_style curly
open_url_with default
detect_urls yes
show_hyperlink_targets yes

# ============================== Remote Control ============================== #

allow_remote_control yes
listen_on unix:/tmp/kitty

# =========================== Terminal Capabilities ========================== #

enable_csi_u_key_encoding yes
enable_reflow_on_resize no
enable_image_scaling yes

# ============================== Resize Behavior ============================= #

resize_draw_strategy blank
resize_debounce_time 0.1 0.5

# ================================= Tab Bar ================================== #

tab_bar_edge top
tab_bar_style powerline
tab_powerline_style slanted
tab_bar_min_tabs 2
tab_bar_margin_width 0.0
tab_bar_margin_height 0.0 0.0
tab_activity_symbol ï‘„
tab_title_max_length 30
tab_title_template "{fmt.fg.red}{bell_symbol}{fmt.fg.tab} {index}: ({tab.active_oldest_exe}) {title} {activity_symbol}"

# =========================== Terminal Identification ======================== #

term xterm-kitty

# ============================= Cursor Behavior ============================== #

shell_integration no-cursor
cursor_shape block
cursor_blink_interval 0.5
cursor_stop_blinking_after 15.0

# ============================ Scrollback Buffer ============================= #

scrollback_lines 10000
scrollback_pager less +G -R
scrollback_pager_history_size 10
scrollback_fill_enlarged_window yes

# ============================ macOS Preferences ============================= #

macos_titlebar_color background
macos_option_as_alt no

# ============================== Color Scheme ================================ #

cursor #c0caf5
cursor_text_color #1a1b26
selection_foreground none
selection_background #28344a
url_color #9ece6a
bell_border_color #e0af68
macos_titlebar_color #16161e

# Mark colors for hints
mark1_foreground #1a1b26
mark1_background #f7768e
mark2_foreground #1a1b26
mark2_background #7aa2f7
mark3_foreground #1a1b26
mark3_background #73daca

# ============================= Available Themes ============================= #

# -------------------------------- Gruvbox ----------------------------------- #

# background #282828
# foreground #fbf1c7

# Tabs
# active_tab_font_style bold
# active_tab_background #282828
# active_tab_foreground #fbf1c7
# inactive_tab_font_style normal
# inactive_tab_background #282828
# inactive_tab_foreground #fbf1c7

# The 16 terminal colors. There are 8 basic colors, each color has a dull and
# bright version.

# black
# color0   #504945
# color8   #665c54
#
# # red
# color1   #ea6962
# color9   #ef8b7b
#
# # green
# color2   #a9b665
# color10  #c3d69b
#
# # yellow
# color3   #d8a657
# color11  #e5c07b
#
# # blue
# color4   #7daea3
# color12  #89c9b8
#
# # purple
# color5   #d3869b
# color13  #e1acbb
#
# # aqua
# color6   #89b482
# color14  #a1cfa8
#
# # white (FG3/FG4)
# color7   #a89984
# color15  #d4be98

# ------------------------------- Tokyo Night -------------------------------- #

foreground #a9b1d6
background #1a1b26

active_tab_font_style   bold
active_tab_foreground   #3d59a1
active_tab_background   #16161e
inactive_tab_font_style bold
inactive_tab_foreground #787c99
inactive_tab_background #16161e

color0  #414868
color1  #f7768e
color2  #73daca
color3  #e0af68
color4  #7aa2f7
color5  #bb9af7
color6  #7dcfff
color7  #c0caf5
color8  #414868
color9  #f7768e
color10 #73daca
color11 #e0af68
color12 #7aa2f7
color13 #bb9af7
color14 #7dcfff
color15 #c0caf5

# ============================= Nerd Fonts Support =========================== #

symbol_map U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d4,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f532,U+f0001-U+f1af0 Symbols Nerd Font Mono
symbol_map U+F0001-U+F1af0 CaskaydiaCove Nerd Font

# ================================ Keybindings =============================== #

# Tabs and windows
map cmd+t launch --type=tab --cwd=current
map cmd+n launch --type=os-window --cwd=current

# Text navigation
map alt+left  send_text all \x1b[1;3D
map alt+right send_text all \x1b[1;3C
map cmd+left  send_text all \x1bOH
map cmd+right send_text all \x1bOF

# Clipboard operations
map super+v      paste_from_clipboard
map ctrl+shift+s paste_from_selection
map super+c      copy_to_clipboard
map shift+insert paste_from_selection

# Scrolling
map ctrl+shift+up        scroll_line_up
map ctrl+shift+down      scroll_line_down
map ctrl+shift+k         scroll_line_up
map ctrl+shift+j         scroll_line_down
map ctrl+shift+page_up   scroll_page_up
map ctrl+shift+page_down scroll_page_down
map ctrl+shift+home      scroll_home
map ctrl+shift+end       scroll_end
map ctrl+shift+h         show_scrollback

# Window management
map super+n          new_os_window
map super+w          close_window
map ctrl+shift+enter new_window
map ctrl+shift+]     next_window
map ctrl+shift+[     previous_window
map ctrl+shift+f     move_window_forward
map ctrl+shift+b     move_window_backward
map ctrl+shift+`     move_window_to_top
map ctrl+shift+1     first_window
map ctrl+shift+2     second_window
map ctrl+shift+3     third_window
map ctrl+shift+4     fourth_window
map ctrl+shift+5     fifth_window
map ctrl+shift+6     sixth_window
map ctrl+shift+7     seventh_window
map ctrl+shift+8     eighth_window
map ctrl+shift+9     ninth_window
map ctrl+shift+0     tenth_window

# Tab management
map ctrl+shift+right next_tab
map ctrl+shift+left  previous_tab
map ctrl+shift+t     new_tab
map ctrl+shift+q     close_tab
map ctrl+shift+l     next_layout
map ctrl+shift+.     move_tab_forward
map ctrl+shift+,     move_tab_backward

# Font size
map ctrl+shift+equal     increase_font_size
map ctrl+shift+plus      increase_font_size
map ctrl+shift+minus     decrease_font_size
map ctrl+shift+backspace restore_font_size

# Configuration reload
map ctrl+shift+f5 load_config_file
map ctrl+shift+f6 debug_config

# Window splitting and layout
map cmd+d launch --location=vsplit --cwd=current
map cmd+shift+d launch --location=hsplit --cwd=current
map cmd+shift+[ previous_window
map cmd+shift+] next_window
map cmd+shift+r start_resizing_window

# Layout management
map cmd+shift+l next_layout
map cmd+shift+enter toggle_layout stack

# Opacity control
map cmd+shift+a>m set_background_opacity +0.05
map cmd+shift+a>l set_background_opacity -0.05
map cmd+shift+a>1 set_background_opacity 1
map cmd+shift+a>d set_background_opacity default

# Hints (URLs, paths, hashes)
map cmd+shift+e kitten hints
map cmd+shift+p>f kitten hints --type path --program -
map cmd+shift+p>l kitten hints --type line --program -
map cmd+shift+p>w kitten hints --type word --program -
map cmd+shift+p>h kitten hints --type hash --program -

# Unicode input
map cmd+shift+u kitten unicode_input

# File transfer via SSH
map cmd+shift+f>s kitten transfer

# Scrollback search
map cmd+shift+/ launch --type=overlay --stdin-source=@screen_scrollback fzf --no-sort --no-mouse --exact -i

# ========================== Advanced Kitten Config ========================== #

# Customize hints appearance
action_alias hints_open kitten hints --hints-offset=0 --alphabet=asdfghjklqwertyuiopzxcvbnm

# Custom actions for different hint types
map cmd+shift+o>u hints_open --type=url
map cmd+shift+o>p hints_open --type=path
map cmd+shift+o>l hints_open --type=line --program @
map cmd+shift+o>w hints_open --type=word --program @

# Panel management
map cmd+shift+z toggle_fullscreen
map cmd+shift+m toggle_maximized

# ============================================================================ #
