# macOS-specific settings

# =========================== OS-specific Overrides ========================== #

# macOS-specific Tipography and Appearance.
macos_colorspace default
macos_titlebar_style system
macos_titlebar_color #565f89
macos_option_as_alt no
macos_quit_when_last_window_closed no
macos_show_window_title_in window

# ================================ Keybindings =============================== #
## Keybindings (macOS - uses `cmd`).

# Tabs and windows.
map cmd+t launch --type=tab --cwd=current
map cmd+n launch --type=os-window --cwd=current
map cmd+w close_window

# Clipboard integration (macOS).
clipboard_control write-clipboard read-clipboard

# Nerd Font mappings (macOS only).
symbol_map U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d4,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f532,U+f0001-U+f1af0 Symbols Nerd Font Mono
symbol_map U+F0001-U+F1af0 CaskaydiaCove Nerd Font

# Text navigation.
map cmd+left  send_text all \x1bOH
map cmd+right send_text all \x1bOF

# Clipboard operations.
map cmd+v paste_from_clipboard
map cmd+c copy_to_clipboard

# Window splitting and layout.
map cmd+d launch --location=vsplit --cwd=current
map cmd+shift+d launch --location=hsplit --cwd=current
map cmd+shift+[ previous_window
map cmd+shift+] next_window
map cmd+shift+r start_resizing_window
map cmd+ctrl+left  resize_window narrower
map cmd+ctrl+right resize_window wider
map cmd+ctrl+up    resize_window taller
map cmd+ctrl+down  resize_window shorter

# Opacity control.
map cmd+shift+a>m set_background_opacity +0.05
map cmd+shift+a>l set_background_opacity -0.05
map cmd+shift+a>1 set_background_opacity 1
map cmd+shift+a>d set_background_opacity default

# Hints (URLs, paths, hashes).
map cmd+shift+e kitten hints
map cmd+shift+p>f kitten hints --type path --program -
map cmd+shift+p>l kitten hints --type line --program -
map cmd+shift+p>w kitten hints --type word --program -
map cmd+shift+p>h kitten hints --type hash --program -

# Unicode input.
map cmd+shift+u kitten unicode_input

# File transfer via SSH.
map cmd+shift+f>s kitten transfer

# Scrollback search.
map cmd+shift+/ launch --type=overlay --stdin-source=@screen_scrollback fzf --no-sort --no-mouse --exact -i

# Advanced Kitten Config - hints.
map cmd+shift+o>u hints_open --type=url
map cmd+shift+o>p hints_open --type=path
map cmd+shift+o>l hints_open --type=line --program @
map cmd+shift+o>w hints_open --type=word --program @

# Panel management.
map cmd+shift+z toggle_fullscreen
map cmd+shift+m toggle_maximized

# Broadcast kitten - send commands to multiple windows.
map cmd+shift+b kitten broadcast

# Show key kitten - debug keyboard input.
map cmd+shift+f1 kitten show_key

# Session switching with prefix "cmd+shift+s".
map cmd+shift+s>d goto_session ~/.config/kitty/sessions/dotfiles.kitty-session
map cmd+shift+s>p goto_session ~/.config/kitty/sessions/dev-python.kitty-session
map cmd+shift+s>j goto_session ~/.config/kitty/sessions/dev-java.kitty-session
map cmd+shift+s>r goto_session ~/.config/kitty/sessions/dev-rust.kitty-session
map cmd+shift+s>c goto_session ~/.config/kitty/sessions/dev-cpp.kitty-session
map cmd+shift+s>h goto_session ~/.config/kitty/sessions/ssh-dev.kitty-session
map cmd+shift+s>m goto_session ~/.config/kitty/sessions/monitoring.kitty-session

# Session navigation and management.
map cmd+shift+s>l goto_session -1
map cmd+shift+s>x close_session
map cmd+shift+s>s save_as_session --use-foreground-process --relocatable

# ============================================================================ #
# End of macOS-specific settings.
